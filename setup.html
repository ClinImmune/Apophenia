<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html> <head>
     <title>Apophenia: a library for scientific computing</title>

<!-- Google is watching. -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-134313-2";
urchinTracker();
</script>


     <link rel="stylesheet" href="typical.css" type="text/css" >
     <script  type="text/javascript" language="JavaScript" src="tree.js"></script>
</head><body>
     <center><table cellpadding=10pt>
     <tr> <td><img width=140px src=flake.gif alt="Patterns in static"></td> 
    <td><table>
     	<tr> <td><center><h2><a href="http://apophenia.info">Apophenia</a></h2></center></td></tr>
<tr><td><div class="qindex"><a class="qindex" href="index.html">&nbsp;Intro</a> | <a class="qindex" href="outline.html">Outline</a> | <a class="qindex" href="globals.html">Index</a> <!--| <a class="qindex" href="files.html">File&nbsp;List&nbsp;</a> -->  </div></td></tr></table>
	</td></tr></table></center>

    <div> <!--Doxygen generates an extra </div>.-->
<!-- Generated by Doxygen 1.7.6.1 -->
</div>
<div class="header">
  <div class="headertitle">
<div class="title">Setting up </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2><a class="anchor" id="cast"></a>
The supporting cast</h2>
<p>To use Apophenia, you will need to have a working C compiler, the GSL (v1.7 or higher) and SQLite installed.</p>
<p>We've moved the setup documentation to <a href="http://modelingwithdata.org/appendix_o.html">Appendix O</a> of <em> Modeling with Data</em>. Please see that page. This site has a few more notes for <a class="el" href="windows.html">Windows</a> users or <a class="el" href="mingw.html">MinGW</a> users.</p>
<h3><a class="anchor" id="sample_program"></a>
Sample programs</h3>
<p>First, there is a short, complete program in the <a class="el" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a> entry which runs a simple OLS regression on a data file. Follow the instructions there to compile and run.</p>
<p>Here is another sample program, intended to show how one would integrate Apophenia into an existing program. For example, say that you are running a simulation of two different treatments, or say that two sensors are posting data at regular intervals. You need to gather the data in an organized form, and then ask questions of the resulting data set. Below, a thousand draws are made from the two processes and put into a database. Then, the data is pulled out, some simple statistics are compiled, and the data is written to a text file for inspection outside of the program. This program will compile cleanly with the sample <a class="el" href="makefile.html">Makefile</a>.</p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">#include &lt;apop.h&gt;</span>

<span class="comment">//Your processes are probably a bit more complex.</span>
<span class="keywordtype">double</span> process_one(gsl_rng *r){
    <span class="keywordflow">return</span> gsl_rng_uniform(r) * gsl_rng_uniform(r) ;
}

<span class="keywordtype">double</span> process_two(gsl_rng *r){
    <span class="keywordflow">return</span> gsl_rng_uniform(r);
}

<span class="keywordtype">int</span> main(){
    <span class="keywordtype">double</span> p1, p2;
    <span class="keywordtype">int</span> i;
    gsl_rng *r = <a class="code" href="group__convenience__fns.html#gada044cf02135422a9f9292b6054c86dd">apop_rng_alloc</a>(123);

    <span class="comment">//create the database and the data table.</span>
    <a class="code" href="apop__db_8c.html#a4d81aff912df2982697038c51795e358">apop_db_open</a>(<span class="stringliteral">&quot;runs.db&quot;</span>);
    <a class="code" href="apop__db_8c.html#a01d501ca84ade92bc72fd4f67a617f64">apop_table_exists</a>(<span class="stringliteral">&quot;samples&quot;</span>,1); <span class="comment">//If the table already exists, delete it.</span>
    <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;create table samples(iteration, process, value); begin;&quot;</span>);

    <span class="comment">//populate the data table with runs.</span>
    <span class="keywordflow">for</span> (i=0; i&lt;1000; i++){
        p1 = process_one(r);
        p2 = process_two(r);
        <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;insert into samples values(%i, %i, %g);&quot;</span>, i, 1, p1);
        <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;insert into samples values(%i, %i, %g);&quot;</span>, i, 2, p2);
    }
    <a class="code" href="group__queries.html#ga236452b3305ea7b791c781d91a819e3b">apop_query</a>(<span class="stringliteral">&quot;commit;&quot;</span>); <span class="comment">//the begin-commit wrapper saves writes to the drive.</span>

    <span class="comment">//pull the data from the database, converting it into a table along the way. </span>
    <a class="code" href="structapop__data.html">apop_data</a> *m  = <a class="code" href="apop__conversions_8c.html#aebe17fe6f2b0c49c0c90824b7a68ff90">apop_db_to_crosstab</a>(<span class="stringliteral">&quot;samples&quot;</span>, <span class="stringliteral">&quot;iteration&quot;</span>,<span class="stringliteral">&quot;process&quot;</span>, <span class="stringliteral">&quot;value&quot;</span>);

    <a class="code" href="stats_8h.html#a79fc915cc70adb705029a8b9322abd7d">Apop_col</a>(m, 0, v1); <span class="comment">//get vector views of the two table columns.</span>
    <a class="code" href="stats_8h.html#a79fc915cc70adb705029a8b9322abd7d">Apop_col</a>(m, 1, v2);

    <span class="comment">//Output a table of means/variances, and t-test results.</span>
    printf(<span class="stringliteral">&quot;\t   mean\t\t   var\n&quot;</span>);
    printf(<span class="stringliteral">&quot;process 1: %f\t%f\n&quot;</span>, <a class="code" href="group__vector__moments.html#ga0f69c8414f1d93fa15f3a631710dcd7a">apop_mean</a>(v1), <a class="code" href="group__vector__moments.html#gacc311abe133963c7959162a7d3d83fb8">apop_var</a>(v1));
    printf(<span class="stringliteral">&quot;process 2: %f\t%f\n\n&quot;</span>, <a class="code" href="group__vector__moments.html#ga0f69c8414f1d93fa15f3a631710dcd7a">apop_mean</a>(v2), <a class="code" href="group__vector__moments.html#gacc311abe133963c7959162a7d3d83fb8">apop_var</a>(v2));
    printf(<span class="stringliteral">&quot;t test\n&quot;</span>);
    <a class="code" href="group__output.html#ga9a30c437ec11a11e37e0db7f82386275">apop_data_show</a>(<a class="code" href="group__ttest.html#ga65c94b79fe91308dc97829741acc9322">apop_t_test</a>(v1, v2));
    <a class="code" href="group__apop__print.html#gab45a848e5dbcaf82b5b95cd03f7b396a">apop_data_print</a>(m, <span class="stringliteral">&quot;the_data.txt&quot;</span>); <span class="comment">//does not overwrite; appends.</span>
}
</pre></div> </div></div><!-- contents -->
<p><p>
<div class="tiny">Autogenerated by doxygen on Mon Jan 7 2013.</div></body></html>
