export junkdir=delete_me
export version=0.12

rm -rf $junkdir
mkdir $junkdir
cp *  wn/*.{c,h} .doxygen $junkdir
cd $junkdir
	#let the GNU prep everything and produce a distribution pkg.
	libtoolize
	aclocal
	autoconf
	automake -a
	./configure
	rm apophenia-$version.tar.gz 
	make dist

	#produce a directory with bonus materials:
	mkdir apophenia-$version

	#add a directory with links to all headers:
	mkdir apophenia
	cd apophenia
		ln -s ../*.h ./
		cd ..
	mv apophenia apophenia-$version

	#helpers for doxygen
	cp documentation.h flake.gif .doxygen *.html apophenia-$version

	#the testing program and scripts
	cp test.c test_data test_script apophenia-$version

	#add bonus materials to tarball produced by make dist
	gzip -d apophenia-$version.tar.gz
	tar rf apophenia-$version.tar apophenia-$version
	gzip apophenia-$version.tar
	mv apophenia-$version.tar.gz ../
	cd ..
echo "***********Done with packing; now compiling***********"
#Compile using the downloadable tarball.
tar xz < apophenia-$version.tar.gz
cd apophenia-$version
	./configure; make; sudo make install
cd ..
