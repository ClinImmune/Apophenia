<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html> <head>
     <title>Apophenia: a library for scientific computing</title>
<!-- Google is watching. -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-134313-2";
urchinTracker();
</script>
     <link rel="stylesheet" href="typical.css" type="text/css" >
     <script  type="text/javascript" language="JavaScript" src="tree.js"></script>
</head><body>
     <center><table cellpadding=10pt>
     <tr> <td><img width=140px src=flake.gif alt="Patterns in static"></td> 
    <td><table>
     	<tr> <td><center><h2><a href="http://apophenia.info">Apophenia</a></h2></center></td></tr>
<tr><td><div class="qindex"><a class="qindex" href="index.html">&nbsp;Intro</a> | <a class="qindex" href="outline.html">Outline</a> | <a class="qindex" href="globals.html">Index</a> <!--| <a class="qindex" href="files.html">File&nbsp;List&nbsp;</a> -->  </div></td></tr></table>
	</td></tr></table></center>
<!-- Generated by Doxygen 1.8.1.1 -->
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Conversion functions</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gab48a3b2c6619dba38053eccf86734adc"><td class="memItemLeft" align="right" valign="top">double *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gab48a3b2c6619dba38053eccf86734adc">apop_vector_to_array</a> (const gsl_vector *in)</td></tr>
<tr class="memitem:ga8abdcdbaceaaf0dd3882a164bc2565de"><td class="memItemLeft" align="right" valign="top">gsl_vector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga8abdcdbaceaaf0dd3882a164bc2565de">apop_array_to_vector</a> (double *in, int size)</td></tr>
<tr class="memitem:ga604388dc6d7d08d95bbaa4422085db9c"><td class="memItemLeft" align="right" valign="top">gsl_matrix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga604388dc6d7d08d95bbaa4422085db9c">apop_vector_to_matrix</a> (const gsl_vector *in, char row_col)</td></tr>
<tr class="memitem:ga5c7ed1341ef1be13e2e277f9f31e42df"><td class="memItemLeft" align="right" valign="top">gsl_matrix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga5c7ed1341ef1be13e2e277f9f31e42df">apop_array_to_matrix</a> (const double **in, const int rows, const int cols)</td></tr>
<tr class="memitem:gaffca0627028a244e262098cf3cf19b28"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structapop__data.html">apop_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gaffca0627028a244e262098cf3cf19b28">apop_array_to_data</a> (const double **in, const int rows, const int cols)</td></tr>
<tr class="memitem:gae8ac57006d4673be7352bcd16debad7f"><td class="memItemLeft" align="right" valign="top">gsl_matrix *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gae8ac57006d4673be7352bcd16debad7f">apop_line_to_matrix</a> (double *line, int rows, int cols)</td></tr>
<tr class="memitem:gac92b5b4d0e985bcca2e6df1835195743"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structapop__data.html">apop_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gac92b5b4d0e985bcca2e6df1835195743">apop_line_to_data</a> (double *in, int vsize, int rows, int cols)</td></tr>
<tr class="memitem:ga630de5d4fcbe9ef13373029f5d813a97"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structapop__data.html">apop_data</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga630de5d4fcbe9ef13373029f5d813a97">apop_text_to_data</a> (char const *text_file, int has_row_names, int has_col_names, int const *field_ends, char const *delimiters)</td></tr>
<tr class="memitem:gae3058b7f39d0442f13284464d1ba235d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gae3058b7f39d0442f13284464d1ba235d">apop_data_unpack</a> (const gsl_vector *in, <a class="el" href="structapop__data.html">apop_data</a> *d, char use_info_pages)</td></tr>
<tr class="memitem:ga7e31798ab418cbfc7488eaba27dad2af"><td class="memItemLeft" align="right" valign="top">gsl_vector *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga7e31798ab418cbfc7488eaba27dad2af">apop_data_pack</a> (const <a class="el" href="structapop__data.html">apop_data</a> *in, gsl_vector *out, char all_pages, char use_info_pages)</td></tr>
<tr class="memitem:gaa57d56a9a364a4f2955d27741bbbf137"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#gaa57d56a9a364a4f2955d27741bbbf137">apop_text_to_db</a> (char const *text_file, char *tabname, int has_row_names, int has_col_names, char **field_names, int const *field_ends, <a class="el" href="structapop__data.html">apop_data</a> *field_params, char *table_params, char const *delimiters)</td></tr>
<tr class="memitem:ga1207fee6d1e23cea944f7c7effd86851"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__conversions.html#ga1207fee6d1e23cea944f7c7effd86851">apop_data_to_db</a> (const <a class="el" href="structapop__data.html">apop_data</a> *set, const char *tabname, const char output_append)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<p>The functions to shunt data between text files, database tables, GSL matrices, and plain old arrays. </p>


<h3><a class="anchor" id="dbtomatrix"></a>Converting from database table to &lt;tt&gt;gsl_matrix&lt;/tt&gt; or \ref apop_data</h3><div class="textblock">Use <code>fill_me = apop_query_to_matrix("select * from table_name;");</code> or <code>fill_me = apop_query_to_data("select * from table_name;");</code>. [See <a class="el" href="group__queries.html#ga8a1da4d925dbafdd2b3318672eac751f">apop_query_to_matrix</a>; <a class="el" href="group__queries.html#gade862993166c6482f53562fb77721db9">apop_query_to_data</a>.] </div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="gaffca0627028a244e262098cf3cf19b28"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapop__data.html">apop_data</a>* apop_array_to_data </td>
          <td>(</td>
          <td class="paramtype">const double **&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>cols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a <code>double **</code> array to an <a class="el" href="gentle.html#apop_data">apop_data</a> set. It will have no names. Input data is copied.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>the array to read in </td></tr>
    <tr><td class="paramname">rows,cols</td><td>the size of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the <a class="el" href="gentle.html#apop_data">apop_data</a> set, allocated for you and ready to use.</dd></dl>
<p>usage: </p>
<pre class="fragment">apop_data *d = apop_array_to_data(indata, 34, 4); </pre><p>If you want to initialize on the allocation line, this isn't what you want. See <a class="el" href="group__conversions.html#gac92b5b4d0e985bcca2e6df1835195743">apop_line_to_data</a>. </p>

</div>
</div>
<a class="anchor" id="ga5c7ed1341ef1be13e2e277f9f31e42df"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsl_matrix* apop_array_to_matrix </td>
          <td>(</td>
          <td class="paramtype">const double **&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int&#160;</td>
          <td class="paramname"><em>cols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a <code>double **</code> array to a <code>gsl_matrix</code></p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>the array to read in </td></tr>
    <tr><td class="paramname">rows,cols</td><td>the size of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the <code>gsl_matrix</code>, allocated for you and ready to use.</dd></dl>
<p>usage: </p>
<pre class="fragment">gsl_matrix *m = apop_array_to_matrix(indata, 34, 4); </pre><p>If you want to initialize on the allocation line, this isn't what you want. See <a class="el" href="group__conversions.html#gae8ac57006d4673be7352bcd16debad7f">apop_line_to_matrix</a>. </p>

</div>
</div>
<a class="anchor" id="ga8abdcdbaceaaf0dd3882a164bc2565de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsl_vector* apop_array_to_vector </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Just copies a one-dimensional array to a <code>gsl_vector</code>. The input array is undisturbed.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>An array of <code>double</code>s. (No default. Must not be <code>NULL</code>); </td></tr>
    <tr><td class="paramname">size</td><td>How long <code>line</code> is. If this is zero or omitted, I'll guess using the <code>sizeof(line)/sizeof(line[0])</code> trick, which will work for most arrays allocated using <code>double []</code> and won't work for those allocated using <code>double *</code>. (default = auto-guess) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A <code>gsl_vector</code> (which I will allocate for you).</dd></dl>
<ul>
<li>If you send in a <code>NULL</code> vector, you get a <code>NULL</code> pointer in return. I warn you of this if <code>apop_opts.verbosity &gt;=1 </code>.</li>
</ul>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
<a class="anchor" id="ga7e31798ab418cbfc7488eaba27dad2af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsl_vector* apop_data_pack </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structapop__data.html">apop_data</a> *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">gsl_vector *&#160;</td>
          <td class="paramname"><em>out</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>all_pages</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>use_info_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function takes in an <a class="el" href="gentle.html#apop_data">apop_data</a> set and writes it as a single column of numbers, outputting a <code>gsl_vector</code>. It is valid to use the <code>out_vector-&gt;data</code> element as an array of <code>doubles</code> of size <code>out_vector-&gt;data-&gt;size</code> (i.e. its <code>stride==1</code>).</p>
<p>The complement is <code>apop_data_unpack</code>. I.e., </p>
<pre class="fragment">apop_data_unpack(apop_data_pack(in_data), data_copy) 
</pre><p> will return the original data set (stripped of text and names).</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>an <code><a class="el" href="structapop__data.html">apop_data</a></code> set. No default; if <code>NULL</code>, return <code>NULL</code>. </td></tr>
    <tr><td class="paramname">out</td><td>If this is not <code>NULL</code>, then put the output here. The dimensions must match exactly. If <code>NULL</code>, then allocate a new data set. Default = <code>NULL</code>. </td></tr>
    <tr><td class="paramname">all_pages</td><td>If <code>'y'</code>, then follow the <code> -&gt;more</code> pointer to fill subsequent pages; else fill only the first page. Informational pages will still be ignored, unless you set <code>.use_info_pages='y'</code> as well. Default = <code>'n'</code>. </td></tr>
    <tr><td class="paramname">use_info_pages</td><td>Pages in XML-style brackets, such as <code>&lt;Covariance&gt;</code> will be ignored unless you set <code>.use_info_pages='y'</code>. Be sure that this is set to the same thing when you both pack and unpack. Default: <code>'n'</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A <code>gsl_vector</code> with the vector data (if any), then each row of data (if any), then the weights (if any), then the same for subsequent pages (if any <code>&amp;&amp; .all_pages=='y'</code>). If <code>out</code> is not <code>NULL</code>, then this is <code>out</code>.</dd></dl>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
<a class="anchor" id="ga1207fee6d1e23cea944f7c7effd86851"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apop_data_to_db </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structapop__data.html">apop_data</a> *&#160;</td>
          <td class="paramname"><em>set</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>tabname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&#160;</td>
          <td class="paramname"><em>output_append</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Dump an <a class="el" href="gentle.html#apop_data">apop_data</a> set into the database.</p>
<p>This function is basically preempted by <a class="el" href="group__apop__print.html#gab45a848e5dbcaf82b5b95cd03f7b396a">apop_data_print</a>. Use that one; this may soon no longer be available.</p>
<p>Column names are inserted if there are any. If there are, all dots are converted to underscores. Otherwise, the columns will be named <code>c1</code>, <code>c2</code>, <code>c3</code>, &amp;c.</p>
<ul>
<li>If <a class="el" href="structapop__opts__type.html">apop_opts.db_name_column</a> is not blank (the default is "row_name"), then a so-named column is created, and the row names are placed there.</li>
</ul>
<ul>
<li>If there are weights, they will be the last column of the table, and the column will be named "weights".</li>
</ul>
<ul>
<li>If the table exists; append to. If the table does not exist, create. So perhaps call <a class="el" href="db_8h.html#a01d501ca84ade92bc72fd4f67a617f64">apop_table_exists</a> <code>("tabname", 'd')</code> to ensure that the table is removed ahead of time.</li>
</ul>
<ul>
<li>You can also call this via <a class="el" href="group__apop__print.html#gab45a848e5dbcaf82b5b95cd03f7b396a">apop_data_print</a> <code>(data, "tabname", .output_type='d', .output_append='w')</code> to overwrite a new table or with <code>.output_append='a'</code> to append.</li>
</ul>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">set</td><td>The name of the matrix </td></tr>
    <tr><td class="paramname">tabname</td><td>The name of the db table to be created </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="gae3058b7f39d0442f13284464d1ba235d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void apop_data_unpack </td>
          <td>(</td>
          <td class="paramtype">const gsl_vector *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapop__data.html">apop_data</a> *&#160;</td>
          <td class="paramname"><em>d</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>use_info_pages</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This is the complement to <code>apop_data_pack</code>, qv. It writes the <code>gsl_vector</code> produced by that function back to the <code><a class="el" href="structapop__data.html">apop_data</a></code> set you provide. It overwrites the data in the vector and matrix elements and, if present, the <code>weights</code> (and that's it, so names or text are as before).</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>A <code>gsl_vector</code> of the form produced by <code>apop_data_pack</code>. No default; must not be <code>NULL</code>. </td></tr>
    <tr><td class="paramname">d</td><td>That data set to be filled. Must be allocated to the correct size. No default; must not be <code>NULL</code>. </td></tr>
    <tr><td class="paramname">use_info_pages</td><td>Pages in XML-style brackets, such as <code>&lt;Covariance&gt;</code> will be ignored unless you set <code>.use_info_pages='y'</code>. Be sure that this is set to the same thing when you both pack and unpack. Default: <code>'n'</code>.</td></tr>
  </table>
  </dd>
</dl>
<ul>
<li>If I get to the end of the first page and have more vector to unpack, and the data to fill has a <code>more</code> element, then I will continue into subsequent pages.</li>
</ul>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
<a class="anchor" id="gac92b5b4d0e985bcca2e6df1835195743"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapop__data.html">apop_data</a>* apop_line_to_data </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>vsize</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>A convenience function to convert a <code>double *</code> array to an <a class="el" href="gentle.html#apop_data">apop_data</a> set. It will have no names. The input data is copied, not pointed to.</p>
<p>See also <a class="el" href="group__conversions.html#gae8ac57006d4673be7352bcd16debad7f">apop_line_to_matrix</a> or <a class="el" href="group__conversions.html#ga8abdcdbaceaaf0dd3882a164bc2565de">apop_array_to_vector</a>; this function will use these and then wrap an <a class="el" href="gentle.html#apop_data">apop_data</a> struct around the output(s).</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>The array to read in. If there were appropriately placed line breaks, then this would look like the eventual data set. For example, <pre class="fragment">double params[] = {0, 1, 2
                   3, 4, 5};
apop_data *out = apop_line_to_data(params, 2, 2, 2);
</pre> will produce an <a class="el" href="gentle.html#apop_data">apop_data</a> set with a vector <img class="formulaInl" alt="$\left[\matrix{0 \cr 3}\right]$" src="form_5.png"/> and a matrix <img class="formulaInl" alt="$\left[\matrix{1 &amp; 2 \cr 4 &amp; 5}\right]$" src="form_6.png"/>. </td></tr>
    <tr><td class="paramname">vsize</td><td>The vector size. If there are also rows/cols, I expect this to equal the number or rows. </td></tr>
    <tr><td class="paramname">rows,cols</td><td>the size of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the <a class="el" href="gentle.html#apop_data">apop_data</a> set, allocated for you and ready to use. </dd></dl>

</div>
</div>
<a class="anchor" id="gae8ac57006d4673be7352bcd16debad7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsl_matrix* apop_line_to_matrix </td>
          <td>(</td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>line</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>rows</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cols</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert a <code>double *</code> array to a <code>gsl_matrix</code>. Input data is copied.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">line</td><td>the array to read in </td></tr>
    <tr><td class="paramname">rows,cols</td><td>the size of the array. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the <code>gsl_matrix</code>, allocated for you and ready to use.</dd></dl>
<p>usage: </p>
<pre class="fragment">gsl_matrix *m = apop_line_to_matrix(indata, 34, 4); </pre> <dl class="section see"><dt>See also:</dt><dd>apop_arrary_to_matrix </dd></dl>

</div>
</div>
<a class="anchor" id="ga630de5d4fcbe9ef13373029f5d813a97"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structapop__data.html">apop_data</a>* apop_text_to_data </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>text_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>has_row_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>has_col_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int const *&#160;</td>
          <td class="paramname"><em>field_ends</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>delimiters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a delimited text file into the matrix element of an <a class="el" href="gentle.html#apop_data">apop_data</a> set.</p>
<p>See <a class="el" href="text_format.html">Notes on input text file formatting</a>.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">text_file</td><td>= "-" The name of the text file to be read in. If "-" (the default), use stdin. </td></tr>
    <tr><td class="paramname">has_row_names</td><td>= 'n'. Does the lines of data have row names? </td></tr>
    <tr><td class="paramname">has_col_names</td><td>= 'y'. Is the top line a list of column names? If there are row names, then there should be no first entry in this line like 'row names'. That is, for a 100x100 data set with row and column names, there are 100 names in the top row, and 101 entries in each subsequent row (name plus 100 data points). </td></tr>
    <tr><td class="paramname">field_ends</td><td>If fields have a fixed size, give the end of each field, e.g. {3, 8 11}. </td></tr>
    <tr><td class="paramname">delimiters</td><td>A string listing the characters that delimit fields. default = <code>"|,\t"</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Returns an <a class="el" href="structapop__data.html">apop_data</a> set.</dd></dl>
<p><b>example:</b> See <a class="el" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a>.</p>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
<a class="anchor" id="gaa57d56a9a364a4f2955d27741bbbf137"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int apop_text_to_db </td>
          <td>(</td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>text_file</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>tabname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>has_row_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>has_col_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char **&#160;</td>
          <td class="paramname"><em>field_names</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int const *&#160;</td>
          <td class="paramname"><em>field_ends</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structapop__data.html">apop_data</a> *&#160;</td>
          <td class="paramname"><em>field_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>table_params</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char const *&#160;</td>
          <td class="paramname"><em>delimiters</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read a text file into a database table.</p>
<p>See <a class="el" href="text_format.html">Notes on input text file formatting</a>.</p>
<p>Using the data set from the example on the <a class="el" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a> page, here's another way to do the regression:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;apop.h&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="keywordtype">int</span> main(<span class="keywordtype">void</span>){ </div>
<div class="line">  <a class="code" href="structapop__data.html">apop_data</a> *data; </div>
<div class="line">  <a class="code" href="structapop__model.html">apop_model</a> *est;</div>
<div class="line">    <a class="code" href="apop__db_8c.html#a4d81aff912df2982697038c51795e358">apop_db_open</a>(NULL);</div>
<div class="line">    <a class="code" href="group__conversions.html#gaa57d56a9a364a4f2955d27741bbbf137">apop_text_to_db</a>(<span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;d&quot;</span>,.has_row_names= 0,.has_col_names=1);</div>
<div class="line">    data = <a class="code" href="group__queries.html#gade862993166c6482f53562fb77721db9">apop_query_to_data</a>(<span class="stringliteral">&quot;select * from d&quot;</span>);</div>
<div class="line">    est  = <a class="code" href="group__models.html#ga0a3be4075a89f7119be95a4718e01ade">apop_estimate</a>(data, <a class="code" href="group__models.html#ga85524b1deabd5829227888fd91740cc3">apop_ols</a>);</div>
<div class="line">    printf(<span class="stringliteral">&quot;The OLS coefficients:\n&quot;</span>);</div>
<div class="line">    <a class="code" href="group__output.html#ga3af0274133637ffd31e9708b87783b53">apop_model_print</a>(est);</div>
<div class="line">} </div>
</div><!-- fragment --><p>By the way, there is a begin/commit wrapper that bundles the process into bundles of 10000 inserts per transaction. if you want to change this to more or less frequent commits, you'll need to modify and recompile the code.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">text_file</td><td>The name of the text file to be read in. If <code>"-"</code>, then read from <code>STDIN</code>. (default = "-") </td></tr>
    <tr><td class="paramname">tabname</td><td>The name to give the table in the database (default = <code> apop_strip_dots (text_file, 'd')</code>; default in Python/R interfaces="t") </td></tr>
    <tr><td class="paramname">has_row_names</td><td>Does the lines of data have row names? (default = 0) </td></tr>
    <tr><td class="paramname">has_col_names</td><td>Is the top line a list of column names? All dots in the column names are converted to underscores, by the way. (default = 1) </td></tr>
    <tr><td class="paramname">field_names</td><td>The list of field names, which will be the columns for the table. If <code>has_col_names==1</code>, read the names from the file (and just set this to <code>NULL</code>). If has_col_names == 1 &amp;&amp; field_names !=NULL, I'll use the field names. (default = NULL) </td></tr>
    <tr><td class="paramname">field_ends</td><td>If fields have a fixed size, give the end of each field, e.g. {3, 8 11}. </td></tr>
    <tr><td class="paramname">field_params</td><td>There is an implicit <code>create table</code> in setting up the database. If you want to add a type, constraint, or key, put that here. The relevant part of the input <a class="el" href="gentle.html#apop_data">apop_data</a> set is the <code>text</code> grid, which should be <img class="formulaInl" alt="$N \times 2$" src="form_7.png"/>. The first item in each row (<code>your_params-&gt;text[n][0]</code>, for each <img class="formulaInl" alt="$n$" src="form_8.png"/>) is a regular expression to match against the variable names; the second item (<code>your_params-&gt;text[n][1]</code>) is the type, constraint, and/or key (i.e., what comes after the name in the <code>create</code> query). Not all variables need be mentioned; the default type if nothing matches is <code>numeric</code>. I go in order until I find a regex that matches the given field, so if you don't like the default, then set the last row to have name <code>.*</code>, which is a regex guaranteed to match anything that wasn't matched by an earlier row, and then set the associated type to your preferred default. See <a class="el" href="asst_8h.html#aa9ec5e7ed223c09bec044ced54f24fad">apop_regex</a> on details of matching. </td></tr>
    <tr><td class="paramname">table_params</td><td>There is an implicit <code>create table</code> in setting up the database. If you want to add a table constraint or key, such as <code>not null primary key (age, sex)</code>, put that here. </td></tr>
    <tr><td class="paramname">delimiters</td><td>A string listing the characters that delimit fields. default = <code>"|,\t"</code></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>Returns the number of rows on success, -1 on error.</dd></dl>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
<a class="anchor" id="gab48a3b2c6619dba38053eccf86734adc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">double* apop_vector_to_array </td>
          <td>(</td>
          <td class="paramtype">const gsl_vector *&#160;</td>
          <td class="paramname"><em>in</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Converts a <code>gsl_vector</code> to an array.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>A <code>gsl_vector</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>A <code>double*</code>, which will be <code>malloc</code>ed inside the function.</dd></dl>
<ul>
<li>If you send in a <code>NULL</code> vector, you get a <code>NULL</code> pointer in return. I warn you of this if <code>apop_opts.verbosity &gt;=1 </code>. </li>
</ul>

</div>
</div>
<a class="anchor" id="ga604388dc6d7d08d95bbaa4422085db9c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">gsl_matrix* apop_vector_to_matrix </td>
          <td>(</td>
          <td class="paramtype">const gsl_vector *&#160;</td>
          <td class="paramname"><em>in</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&#160;</td>
          <td class="paramname"><em>row_col</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mathematically, a vector of size <img class="formulaInl" alt="$N$" src="form_3.png"/> and a matrix of size <img class="formulaInl" alt="$N \times 1 $" src="form_4.png"/> are equivalent, but they're two different types in C. This function copies the data in a vector to a new one-column (or one-row) matrix and returns the newly-allocated and filled matrix.</p>
<p>For the reverse, try <a class="el" href="group__conversions.html#ga7e31798ab418cbfc7488eaba27dad2af">apop_data_pack</a>.</p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">in</td><td>a <code>gsl_vector</code> (No default. If <code>NULL</code>, I return <code>NULL</code>, with a warning if <code>apop_opts.verbose &gt;=1 </code>) </td></tr>
    <tr><td class="paramname">row_col</td><td>If <code>'r'</code>, then this will be a row (1 x N) instead of the default, a column (N x 1). (default: <code>'c'</code>) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>a newly-allocated <code>gsl_matrix</code> with one column.</dd></dl>
<ul>
<li>If you send in a <code>NULL</code> vector, you get a <code>NULL</code> pointer in return. I warn you of this if <code>apop_opts.verbosity &gt;=1 </code>. </li>
<li>If <code>gsl_matrix_alloc</code> fails and <code>apop_opts.stop_on_warn=='n'</code>, you get a <code>NULL</code> pointer in return.</li>
</ul>
<p>This function uses the <a class="el" href="designated.html">Designated initializers</a> syntax for inputs. </p>

</div>
</div>
</div><!-- contents -->
<p><p>
<div class="tiny">Autogenerated by doxygen on Mon Oct 8 2012.</div></body></html>
